\part{Applying textures in OpenGL}
\frame{\partpage}

\begin{frame}[fragile]{Texture loading}
	\pause Load with SDL Image:
	\begin{lstlisting}
SDL_Surface* image = IMG_Load("Crate.jpg");
	\end{lstlisting}
	\pause Set up in OpenGL:
	\begin{lstlisting}
GLuint textureID;
glGenTextures(1, &textureID);
glBindTexture(GL_TEXTURE_2D, textureID);
glTexImage2D(GL_TEXTURE_2D, 0, GL_RGB, image->w, image->h,
			0, GL_RGB, GL_UNSIGNED_BYTE, image->pixels);
	\end{lstlisting}
	\pause Assign texture coordinates to each vertex - as for any other attribute.
\end{frame}

\begin{frame}[fragile]{Texture filtering}
	\begin{lstlisting}
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER,
				GL_LINEAR);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER,
				GL_LINEAR);
	\end{lstlisting}
	\begin{itemize}
		\pause\item \textbf{Linear interpolation} (\lstinline{GL_LINEAR})
			smooths between pixels
		\pause\item \textbf{Nearest neighbour} (\lstinline{GL_NEAREST})
			is pixelated but may be slightly faster
		\pause\item \textbf{Mip-mapping} pre-calculates scaled down versions of the texture ---
			improves quality but costs memory
	\end{itemize}
	\pause \begin{lstlisting}
glGenerateMipmap(GL_TEXTURE_2D);
	\end{lstlisting}
\end{frame}

\begin{frame}[fragile]{Textures in GLSL}
	Fragment shader:
	
	\begin{lstlisting}[language=GLSL]
in vec2 textureCoords;
uniform sampler2D textureSampler;

void main()
{
    fragmentColour = texture(textureSampler, textureCoords);
}
	\end{lstlisting}
\end{frame}

\begin{frame}[fragile]{Alpha in OpenGL}
	\begin{itemize}
		\item Use \lstinline[language=GLSL]{vec4} instead of \lstinline[language=GLSL]{vec3} for colours
		\pause\item Textures can have an \textbf{alpha channel}
			\begin{itemize}
				\pause\item PNG supports alpha channels, JPG and BMP do not
			\end{itemize}
		\pause\item Need to enable \textbf{alpha blending}
	\end{itemize}
	\pause
	\begin{lstlisting}
glEnable(GL_BLEND);
glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);
	\end{lstlisting}
	\begin{itemize}	
		\item Other values can be passed to \lstinline{glBlendFunc} for special effects
			(e.g.\ \textbf{additive blending} is often used for particle effects simulating
				light, fire, explosions etc.)
	\end{itemize}
\end{frame}
